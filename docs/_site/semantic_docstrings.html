<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Full Specification | Semantic Docstrings</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Full Specification" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A semantic documentation standard for Python that captures Responsibility, Context, Role, and Boundaries." />
<meta property="og:description" content="A semantic documentation standard for Python that captures Responsibility, Context, Role, and Boundaries." />
<link rel="canonical" href="http://localhost:4000/semantic_docstrings.html" />
<meta property="og:url" content="http://localhost:4000/semantic_docstrings.html" />
<meta property="og:site_name" content="Semantic Docstrings" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Full Specification" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"A semantic documentation standard for Python that captures Responsibility, Context, Role, and Boundaries.","headline":"Full Specification","url":"http://localhost:4000/semantic_docstrings.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Semantic Docstrings" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Semantic Docstrings</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Home</a><a class="page-link" href="/semantic_docstrings.html">Full Specification</a><a class="page-link" href="/why_semantic_docstrings.html">Why Semantic Docstrings</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Full Specification</h1>
  </header>

  <div class="post-content">
    <h1 id="documentation-as-a-semantic-layer">DOCUMENTATION AS A SEMANTIC LAYER</h1>
<p><strong>Zen: “Readability counts”</strong></p>

<h3 id="essence">Essence</h3>
<p>Docstrings add a <strong>layer of meaning</strong> that pure syntax does not express. They explain <strong>Responsibility, Context, and Intention</strong> — not just implementation.</p>

<blockquote>
  <p><strong>Critical insight:</strong> Docstrings are not only for the new developer, but add a <strong>semantic layer</strong> that transcends syntax.<br />
Code without docstrings says <em>“WHAT”</em>, code with docstrings says <em>“WHY”</em>.</p>
</blockquote>

<hr />

<h3 id="what-syntax-does-not-express">What Syntax DOES NOT Express</h3>

<h4 id="example-function">Example: Function</h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ❌ ONLY SYNTAX (no meaning)
</span><span class="k">def</span> <span class="nf">calculate_discount</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
    <span class="p">...</span>
</code></pre></div></div>
<p><strong>Syntax says:</strong> “Receives User and Decimal, returns Decimal”</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ✅ SYNTAX + SEMANTICS (with meaning)
</span><span class="k">def</span> <span class="nf">calculate_discount</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Decimal</span><span class="p">:</span>
    <span class="s">"""Calculate discount based on user loyalty and purchase volume.

    Args:
        user: User account for loyalty tier determination
        amount: Purchase amount for volume-based discount calculation

    Returns:
        Final discount amount, capped at maximum allowed discount
    """</span>
    <span class="p">...</span>
</code></pre></div></div>

<p><strong>Semantics add:</strong></p>
<ul>
  <li><strong>WHY</strong> user exists (loyalty tier)</li>
  <li><strong>WHY</strong> amount exists (volume calculation)</li>
  <li><strong>WHY</strong> returns Decimal (capped discount)</li>
</ul>

<hr />

<h3 id="levels-of-meaning">Levels of Meaning</h3>

<h4 id="modules-architectural-role"><strong>Modules: Architectural Role</strong></h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ❌ REPEATS SYNTAX
</span><span class="s">"""Workflow module."""</span>

<span class="c1"># ✅ ADDS ARCHITECTURAL MEANING
</span><span class="s">"""
This module orchestrates the conversational flow for debt negotiation.

Architecture:
    Acts as the ORCHESTRATOR of the conversation flow.
    Decides WHICH agent to use (identification vs negotiation)
    and WHEN to transition between them.

Responsibility:
    Coordinate message flow across agents.

Should:
    - Receive and validate incoming messages from external sources
    - Determine conversation state (identified vs unidentified user)
    - Route messages to appropriate agent

Boundaries:
    - Do not create or configure agents (delegated to agent modules)
    - Do not manage MCP connections or tools (delegated to helpers)
    - Do not apply business rules (delegated to domain layer)

Entry:
    - process_message: Main public function called by API routes
"""</span>
</code></pre></div></div>

<p><strong>Semantics explain:</strong></p>
<ul>
  <li><strong>WHY</strong> the module exists (“orchestrator”)</li>
  <li><strong>WHAT</strong> its role in the architecture is</li>
  <li><strong>Conceptual BOUNDARIES</strong> (Should vs Boundaries)</li>
  <li><strong>Entry</strong>: public entry points</li>
</ul>

<hr />

<h4 id="functions-context-and-intention"><strong>Functions: Context and Intention</strong></h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ❌ REPEATS SYNTAX
</span><span class="k">def</span> <span class="nf">_validate_and_extract_payload</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="s">"""Validates payload and extracts data."""</span>
    <span class="p">...</span>

<span class="c1"># ✅ ADDS CONTEXT AND INTENTION
</span><span class="k">def</span> <span class="nf">_validate_and_extract_payload</span><span class="p">(</span>
    <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="bp">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="bp">None</span><span class="p">]:</span>
    <span class="s">"""
    Validates incoming payload and extracts essential conversation data.

    Responsibility:
        First line of defense for data validation.
        All subsequent processing assumes this contract.

    Context:
        Payload comes from an EXTERNAL SOURCE (WhatsApp API) and cannot be trusted.
        Enforces contract: text is mandatory; session/user IDs optional.

    Args:
        payload: Dictionary from external API
                 Expected structure: {'text': str, 'chat_session_id'?: str, 'chat_user_id'?: str}

    Returns:
        (user_message, chat_session_id, chat_user_id)
        - user_message: Always present
        - session_id: None if anonymous
        - user_id: None if anonymous

    Raises:
        ValueError: If 'text' is missing — caller MUST handle to return proper error
    """</span>
    <span class="p">...</span>
</code></pre></div></div>

<p><strong>Semantics add:</strong></p>
<ul>
  <li><strong>Responsibility</strong>: architectural contract (“first line of defense”)</li>
  <li><strong>Context</strong>: data origin and trust</li>
  <li><strong>Returns</strong>: semantic meaning of the return</li>
  <li><strong>Raises</strong>: intention of exception use</li>
</ul>

<hr />

<h4 id="classes-boundaries-and-role-in-the-system"><strong>Classes: Boundaries and Role in the System</strong></h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># ❌ ONLY SYNTAX
</span><span class="k">class</span> <span class="nc">IdentificationAgent</span><span class="p">:</span>
    <span class="s">"""Agent for user identification."""</span>

<span class="c1"># ✅ SEMANTIC LAYER
</span><span class="k">class</span> <span class="nc">IdentificationAgent</span><span class="p">:</span>
    <span class="s">"""
    Manages user identification state and conversation flow.

    Responsibility:
        Maintain identification state across conversation turns.
        Provide clear interface to check if user is identified and
        retrieve credentials (CPF, account_uuid).

    Boundaries:
        Does NOT perform business logic — only manages conversation
        state persistence.

    Role:
        State manager for user identification journey,
        bridging stateless API calls and stateful context.
    """</span>
</code></pre></div></div>

<p><strong>Semantics explain:</strong></p>
<ul>
  <li><strong>Responsibility</strong>: SRP (identification state)</li>
  <li><strong>Boundaries</strong>: clear limitations (does not do business logic)</li>
  <li><strong>Role</strong>: architectural role (“state manager”)</li>
</ul>

<hr />

<h3 id="applied-pattern-complete-structure">Applied Pattern: Complete Structure</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
[MODULE PURPOSE: 1–2 sentences explaining why this module exists]

Architecture:
    [What is this module’s primary role in system architecture?]

Responsibility:
    [Single overarching responsibility]

Should:
    - [Responsibility 1]
    - [Responsibility 2]

Boundaries:
    - [Delegated responsibility]
    - [Out of scope]

Entry:
    - [public_function: Brief description]
"""</span>

<span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">:</span>
    <span class="s">"""
    [CLASS PURPOSE: 1–2 sentences]

    Responsibility:
        [What is this class’s single responsibility?]

    Boundaries:
        [What this class does NOT handle]

    Role:
        [Position of this class in system]

    Attributes:
        attr1: [Meaning]
        attr2: [Meaning]

    Methods:
        method1(): [What it does]
    """</span>

<span class="k">def</span> <span class="nf">public_function</span><span class="p">(</span><span class="n">arg1</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">arg2</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="s">"""
    [One-line summary]

    Responsibility:
        [What is this function’s single responsibility?]

    Context:
        [Why it exists, when to call, assumptions]

    Args:
        arg1: [Why it exists / constraints]
        arg2: [Why it exists / constraints]

    Returns:
        [Meaning of return value]

    Raises:
        ValueError: [Why it may be raised / what caller must do]

    Note:
        [Important details or gotchas]
    """</span>
</code></pre></div></div>

<hr />

<h3 id="why-does-this-matter">Why Does This Matter?</h3>

<h4 id="1-syntax--what--semantics--why">1. <strong>Syntax → WHAT | Semantics → WHY</strong></h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Syntax says WHAT:
</span><span class="n">user</span><span class="p">:</span> <span class="n">User</span><span class="p">,</span> <span class="n">amount</span><span class="p">:</span> <span class="n">Decimal</span> <span class="o">-&gt;</span> <span class="n">Decimal</span>

<span class="c1"># Semantics says WHY:
</span><span class="n">user</span><span class="p">:</span> <span class="s">"for loyalty tier determination"</span>
<span class="n">amount</span><span class="p">:</span> <span class="s">"for volume-based calculation"</span>
<span class="k">return</span><span class="p">:</span> <span class="s">"final discount with cap"</span>
</code></pre></div></div>

<h4 id="2-code-changes-meaning-remains">2. <strong>Code Changes, Meaning Remains</strong></h4>
<ul>
  <li>Refactoring may change implementation</li>
  <li>Docstring preserves <strong>intention</strong> and <strong>responsibility</strong></li>
  <li>New developer (or LLM) understands <strong>concept</strong>, not just code</li>
</ul>

<h4 id="3-prevents-semantic-coupling">3. <strong>Prevents Semantic Coupling</strong></h4>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""
Boundaries:
    - Manage MCP connections (delegated to execution helpers)
"""</span>
</code></pre></div></div>
<p>→ Defines conceptual boundaries, not just technical ones</p>

<h4 id="4-llmstools-understand-intention">4. <strong>LLMs/Tools Understand Intention</strong></h4>
<ul>
  <li>IDE autocomplete shows <strong>context</strong>, not just type</li>
  <li>Code review focuses on <strong>responsibility violation</strong></li>
  <li>LLMs generate code aligned with <strong>architecture</strong></li>
</ul>

<hr />

<h3 id="comparison-syntax-vs-semantics">Comparison: Syntax vs Semantics</h3>

<table>
  <thead>
    <tr>
      <th>Aspect</th>
      <th>Syntax Only</th>
      <th>With Semantic Layer</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Module</strong></td>
      <td>Filename</td>
      <td>WHY it exists, WHAT responsibility</td>
    </tr>
    <tr>
      <td><strong>Function</strong></td>
      <td>Signature (types)</td>
      <td>CONTEXT of args, INTENTION of return</td>
    </tr>
    <tr>
      <td><strong>Class</strong></td>
      <td>Attributes/methods</td>
      <td>BOUNDARIES, ROLE in system</td>
    </tr>
    <tr>
      <td><strong>Arguments</strong></td>
      <td><code class="language-plaintext highlighter-rouge">user: User</code></td>
      <td>“User account for loyalty tier determination”</td>
    </tr>
    <tr>
      <td><strong>Return</strong></td>
      <td><code class="language-plaintext highlighter-rouge">-&gt; Decimal</code></td>
      <td>“Final discount amount, capped at maximum”</td>
    </tr>
    <tr>
      <td><strong>Exception</strong></td>
      <td><code class="language-plaintext highlighter-rouge">raises ValueError</code></td>
      <td>“If text missing - caller MUST handle”</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="why">Why?</h3>
<ul>
  <li>✅ Adds meaning that syntax does not express</li>
  <li>✅ Preserves intention even with refactoring</li>
  <li>✅ Defines conceptual boundaries, not just technical ones</li>
  <li>✅ Self-explanatory code at architectural level</li>
  <li>✅ Reduces need for external documentation</li>
  <li>✅ Facilitates onboarding, code review, and use by LLMs</li>
</ul>


  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Semantic Docstrings</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Semantic Docstrings</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>A semantic documentation standard for Python that captures Responsibility, Context, Role, and Boundaries.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
